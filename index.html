<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyUniform | Broward County</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; overflow-x: hidden; }

        /* --- ANIMATIONS --- */
        @keyframes subtle-float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes pop { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .animate-float { animation: subtle-float 4s ease-in-out infinite; }

        .school-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; border: 1px solid rgba(255, 255, 255, 0.1); }
        .school-card:hover { transform: translateY(-10px); background-color: rgba(255, 255, 255, 0.15); border-color: #6366f1; }

        /* --- MANNEQUIN --- */
        .mannequin-container { position: relative; width: 440px; height: 540px; display: flex; justify-content: center; }
        .shirt-body { position: absolute; top: 40px; width: 260px; height: 460px; background-color: #ffffff; border-radius: 4px; border: 2px solid #cbd5e1; box-shadow: 0 10px 25px rgba(0,0,0,0.1); z-index: 10; }
        .sleeve { position: absolute; top: 45px; width: 85px; height: 210px; background-color: #ffffff; border: 2px solid #cbd5e1; z-index: 5; }
        .sleeve-left { left: 20px; transform: rotate(10deg); border-radius: 20px 0 0 10px; }
        .sleeve-right { right: 20px; transform: rotate(-10deg); border-radius: 0 20px 10px 0; }
        .collar-left, .collar-right { position: absolute; top: 0; width: 0; height: 0; border-style: solid; z-index: 25; }
        .collar-left { left: 55px; border-width: 50px 75px 0 0; border-color: #f1f5f9 transparent transparent transparent; }
        .collar-right { right: 55px; border-width: 50px 0 0 75px; border-color: #f1f5f9 transparent transparent transparent; }
        
        .pocket { position: absolute; width: 90px; height: 100px; background-color: #ffffff; border: 1px solid #e2e8f0; z-index: 12; }
        .pocket-flap { position: absolute; top: -5px; width: 100%; height: 26px; background-color: #ffffff; border: 1px solid #e2e8f0; clip-path: polygon(0 0, 100% 0, 100% 70%, 50% 100%, 0 70%); z-index: 13; }
        .pocket-left { top: 150px; right: 30px; } 
        .pocket-right { top: 150px; left: 30px; }
        
        /* --- COMPONENTS --- */
        .ribbon-rack-container { position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); margin-bottom: 8px; display: flex; flex-direction: column-reverse; gap: 1.5px; align-items: center; }
        .ribbon-mini { width: 30px; height: 10px; background-size: 100% 100%; border: 0.1px solid #000; position: relative; animation: pop 0.2s ease-out; }
        .mini-star { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 6px; color: #ffd700; text-shadow: 0.5px 0.5px black; }
        
        .medal-rack-container { position: absolute; top: 12px; left: 50%; transform: translateX(-50%); display: flex; gap: 3px; z-index: 14; justify-content: center; width: 80px; }
        .medal-mini { width: 14px; height: 24px; display: flex; flex-direction: column; align-items: center; animation: pop 0.2s ease-out; }
        .medal-ribbon-part { width: 12px; height: 12px; border: 0.1px solid #000; }
        .medal-coin-part { width: 12px; height: 12px; background: #ffd700; border-radius: 50%; border: 0.5px solid #996515; margin-top: -2px; }

        .arc-container { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; width: 90px; gap: 0px; z-index: 15; }
        .arc-mini { width: 85px; height: 25px; background-size: contain; background-repeat: no-repeat; background-position: center; margin-bottom: -16px; animation: pop 0.2s ease-out; }

        #selection-list::-webkit-scrollbar { width: 6px; }
        #selection-list::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body>

    <div id="landing-page" class="fixed inset-0 z-50 bg-[#0f172a] flex flex-col items-center justify-center p-6 text-white">
        <h1 class="text-5xl md:text-7xl font-black text-center mb-12">Broward County<br><span class="text-indigo-500 italic">MyUniform</span></h1>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-2xl">
            <div onclick="enterApp('Pompano Beach HS', 'Tornado Battalion')" class="school-card p-8 bg-white/5 rounded-[2.5rem]">
                <h3 class="font-bold text-2xl">Pompano Beach</h3>
                <p class="text-indigo-400 text-[11px] font-black uppercase tracking-widest">Tornado Battalion</p>
            </div>
            <div class="school-card p-8 bg-white/5 rounded-[2.5rem] opacity-40 cursor-not-allowed">
                <h3 class="font-bold text-2xl">Other Schools</h3>
                <p class="text-slate-400 text-[11px] font-black uppercase tracking-widest">Coming Soon</p>
            </div>
        </div>
    </div>

    <div id="builder-content" class="hidden min-h-screen">
        <header class="p-6 flex items-center justify-between sticky top-0 bg-slate-50/80 backdrop-blur-xl z-40 border-b">
            <button onclick="exitApp()" class="bg-white p-2.5 rounded-xl border border-slate-200">EXIT</button>
            <div class="text-center">
                <h2 id="header-school-name" class="text-xl font-black">School</h2>
                <p id="header-unit-name" class="text-indigo-600 font-black text-[10px] uppercase">Unit</p>
            </div>
            <button onclick="resetAll()" class="text-red-500 font-bold text-xs">RESET</button>
        </header>

        <div class="max-w-7xl mx-auto px-4 py-10 grid grid-cols-1 lg:grid-cols-2 gap-10">
            <div class="flex flex-col items-center">
                <div class="bg-[#0f172a] w-full rounded-[4rem] p-4 py-12 shadow-2xl relative flex items-center justify-center overflow-hidden">
                    <div class="mannequin-container animate-float">
                        <div class="sleeve sleeve-left"></div><div class="sleeve sleeve-right"></div>
                        <div class="shirt-body">
                            <div class="collar-left"></div><div class="collar-right"></div>
                            <div class="pocket pocket-left">
                                <div class="pocket-flap"></div>
                                <div id="u-ribbons" class="ribbon-rack-container"></div>
                                <div id="u-medals" class="medal-rack-container"></div>
                            </div>
                            <div class="pocket pocket-right">
                                <div class="pocket-flap"></div>
                                <div id="u-arcs" class="arc-container"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-[3rem] p-8 shadow-xl border h-[700px] flex flex-col">
                <div class="flex p-1.5 bg-slate-100 rounded-[1.8rem] mb-6">
                    <button onclick="setTab('ribbons')" id="btn-ribbons" class="flex-1 py-3 rounded-[1.5rem] font-bold text-sm bg-white text-indigo-600 shadow-sm">Ribbons</button>
                    <button onclick="setTab('medals')" id="btn-medals" class="flex-1 py-3 rounded-[1.5rem] font-bold text-sm text-slate-500">Medals</button>
                    <button onclick="setTab('arcs')" id="btn-arcs" class="flex-1 py-3 rounded-[1.5rem] font-bold text-sm text-slate-500">Arcs</button>
                </div>
                <div id="selection-list" class="space-y-3 overflow-y-auto pr-2 flex-1"></div>
            </div>
        </div>
    </div>

    <script>
        const OFFICIAL_RIBBONS = [
            { id: 'hero', name: 'Medal for Heroism', precedence: 1, img: 'assets/army_jrotc_medal_for_heroism_ribbon.png' },
            { id: 'sup-c', name: 'Superior Cadet Award', precedence: 2, img: 'assets/army_jrotc_superior_cadet_ribbon.png' },
            { id: 'n11', name: 'Distinguished Cadet Award N-1-1', precedence: 3, img: 'assets/army_jrotc_distinguished_cadet_ribbon.png' },
            { id: 'n12', name: 'Academic Excellence Award N-1-2', precedence: 4, img: 'assets/army_jrotc_academic_excellence_ribbon.png' },
            { id: 'n13', name: 'Academic Achievement Award N-1-3', precedence: 5, img: 'assets/army_jrotc_academic_achievement_ribbon.png' },
            { id: 'n14', name: 'Perfect Attendance Award N-1-4', precedence: 6, img: 'assets/army_jrotc_perfect_attendance_ribbon.png' },
            { id: 'n15', name: 'Student Governement Award N-1-5', precedence: 7, img: 'assets/army_jrotc_student_government_ribbon.png' },
            { id: 'n16', name: 'Leadership Education & Training N-1-6', precedence: 8, img: 'assets/army_jrotc_leadership_education_training_service_ribbon.png' },
            { id: 'n17', name: 'Superior Instructor N-1-7 Ribbon', precedence: 9, img: 'assets/army_jrotc_n_1_7_ribbon.png' },
            { id: 'n18', name: 'CPR First Aid N-1-8 Ribbon', precedence: 10, img: 'assets/army_jrotc_n_1_8_ribbon.png' },
            { id: 'n19', name: 'Distinguished Cadet N-1-9 Ribbon', precedence: 11, img: 'assets/army_jrotc_n_1_9_ribbon.png' },
            { id: 'n110', name: 'Honor Cadet N-1-10 Ribbon', precedence: 12, img: 'assets/army_jrotc_n_1_10_ribbon.png' },
            { id: 'n31', name: 'Dai/Sai Instructor Leadership N-3-1 Ribbon', precedence: 13, img: 'assets/army_jrotc_dai_sai_instructor_leadership_ribbon.png' },
            { id: 'n32', name: 'Personal Appearance N-3-2 Ribbon', precedence: 14, img: 'assets/army_jrotc_personal_appearance_ribbon.png' },
            { id: 'n33', name: 'Profiency N-3-3 Ribbon', precedence: 15, img: 'assets/army_jrotc_proficiency_ribbon.png' },
            { id: 'n34', name: 'Drill Team N-3-4 Ribbon', precedence: 16, img: 'assets/army_jrotc_drill_team_ribbon.png' },
            { id: 'n35', name: 'Orienteering N-3-5 Ribbon', precedence: 17, img: 'assets/army_jrotc_orienteering_ribbon.png' },
            { id: 'n36', name: 'Color | Honor Guard N-3-6 Ribbon', precedence: 18, img: 'assets/army_jrotc_color_guard_ribbon.png' },
            { id: 'n37', name: 'Rifle | Marksmanship Team N-3-7 Ribbon', precedence: 19, img: 'assets/army_jrotc_rifle_team_ribbon.png' },
            { id: 'n38', name: 'Adventure Training Team N-3-8 Ribbon', precedence: 20, img: 'assets/army_jrotc_adventure_training_ribbon.png' },
            { id: 'n39', name: 'Commendation N-3-9 Ribbon', precedence: 21, img: 'assets/army_jrotc_commendation_ribbon.png' },
            { id: 'n310', name: 'Good Conduct N-3-10 Ribbon', precedence: 22, img: 'assets/army_jrotc_good_conduct_ribbon.png' },
            { id: 'n311', name: 'JCLC Participation N-3-11 Ribbon', precedence: 23, img: 'assets/army_jrotc_jclc_participation_ribbon.png' },
            { id: 'n312', name: 'Championship Drill Team N-3-12 Ribbon', precedence: 24, img: 'assets/army_jrotc_n_3_12_ribbon.png' },
            { id: 'n313', name: 'Raider Team N-3-13 Ribbon', precedence: 25, img: 'assets/army_jrotc_n_3_13_ribbon.png' },
            { id: 'n314', name: 'Recondo / Rappelling N-3-14 Ribbon', precedence: 26, img: 'assets/army_jrotc_n_3_14_ribbon.png' },
            { id: 'n315', name: 'Meritorious Actions N-3-15 Ribbon', precedence: 27, img: 'assets/army_jrotc_n_3_15_ribbon.png' },
            { id: 'n21', name: 'Varsity Athletics Ribbon N-2-1', precedence: 28, img: 'assets/army_jrotc_varsity_athletics_ribbon.png' },
            { id: 'n22', name: 'Physical Fitness N-2-2 Ribbon', precedence: 29, img: 'assets/army_jrotc_physical_fitness_ribbon.png' },
            { id: 'n23', name: 'JROTC Athletics N-2-3 Ribbon', precedence: 30, img: 'assets/army_jrotc_athletics_ribbon.png' },
            { id: 'n24', name: 'Junior Varsity Athletics N-2-4 Ribbon', precedence: 31, img: 'assets/army_jrotc_n_2_4_ribbon.png' },
            { id: 'n25', name: 'Athletic Service N-2-5 Ribbon', precedence: 32, img: 'assets/army_jrotc_n_2_5_ribbon.png' },
            { id: 'n41', name: 'Parade N-4-1 Ribbon', precedence: 33, img: 'assets/army_jrotc_parade_ribbon.png' },
            { id: 'n42', name: 'Recruiting N-4-2 Ribbon', precedence: 34, img: 'assets/army_jrotc_recruiting_ribbon.png' },
            { id: 'n43', name: 'School Support N-4-3 Ribbon', precedence: 35, img: 'assets/army_jrotc_n_4_3_ribbon.png' },
            { id: 'n44', name: 'Community Service N-4-4 Ribbon', precedence: 36, img: 'assets/army_jrotc_n_4_4_ribbon.png' },
            { id: 'n45', name: 'Confidence Course N-4-5 Ribbon', precedence: 37, img: 'assets/army_jrotc_n_4_5_ribbon.png' },
            { id: 'n46', name: 'Service Learning N-4-6 Ribbon', precedence: 38, img: 'assets/army_jrotc_service_learning_ribbon.png' },
            { id: 'n47', name: 'Excellent Staff Performance N-4-7 Ribbon', precedence: 39, img: 'assets/army_jrotc_excellent_staff_performance_ribbon.png' }
        ];

        const POMPANO_RIBBONS = [
            "Company Commander of the Quarter", "Company XO of the Quarter", "100 Flags", "Funeral"
        ].map((name, i) => ({ id: `pomp-${i}`, name: name, precedence: 200 + i, img: '' }));

        const MEDALS = [
            { id: 'm1', name: 'JPA Medal', color: '#8b0000' },
            { id: 'm2', name: '100 Flag Medal', color: '#ffd700' },
            { id: 'm3', name: 'Superior Cadet', color: '#006400' }
        ];

        const ARCS = [
            { id: 'a1', name: 'Cadet Challenge', img: 'assets/Cadet_Challenge.png' },
            { id: 'a2', name: 'Color Guard', img: 'assets/Color_Guard_Arc.png' },
            { id: 'a3', name: 'Drill Team', img: 'assets/Drill_Arc.png' },
            { id: 'a4', name: 'Flag Detail', img: 'assets/Flag_Detail_Arc.png' },
            { id: 'a5', name: 'Fundraising', img: 'assets/Fundraising_Arc.png' },
            { id: 'a6', name: 'JCLC', img: 'assets/JCLC_Arc.png' },
            { id: 'a7', name: 'Raider', img: 'assets/Raider_Arc.png' },
            { id: 'a8', name: 'Saber Team', img: 'assets/Saber_Team_Arc.png' },
            { id: 'a9', name: 'Staff', img: 'assets/Staff_Arc.png' }
        ].sort((a,b) => a.name.localeCompare(b.name));

        let state = { ribbons: new Map(), medals: new Set(), arcs: new Set(), tab: 'ribbons', school: '' };

        function enterApp(s, u) {
            state.school = s;
            document.getElementById('header-school-name').innerText = s;
            document.getElementById('header-unit-name').innerText = u;
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('builder-content').classList.remove('hidden');
            renderSelections();
        }

        function exitApp() { location.reload(); }

        function setTab(t) {
            state.tab = t;
            ['ribbons', 'medals', 'arcs'].forEach(tab => {
                const btn = document.getElementById(`btn-${tab}`);
                btn.className = tab === t ? "flex-1 py-3 rounded-[1.5rem] font-bold text-sm bg-white text-indigo-600 shadow-sm" : "flex-1 py-3 rounded-[1.5rem] font-bold text-sm text-slate-500";
            });
            renderSelections();
        }

        function updateRibbon(id, d) {
            let c = (state.ribbons.get(id) || 0) + d;
            if (c <= 0) state.ribbons.delete(id); else state.ribbons.set(id, Math.min(c, 10));
            updatePreview(); renderSelections();
        }

        function toggleItem(type, id) {
            if (state[type].has(id)) state[type].delete(id); else state[type].add(id);
            updatePreview(); renderSelections();
        }

        function renderSelections() {
            const list = document.getElementById('selection-list');
            list.innerHTML = '';
            
            if (state.tab === 'ribbons') {
                const available = [...OFFICIAL_RIBBONS, ...POMPANO_RIBBONS];
                available.forEach(r => {
                    const count = state.ribbons.get(r.id) || 0;
                    const div = document.createElement('div');
                    div.className = `flex items-center justify-between p-4 rounded-3xl border transition-all ${count > 0 ? 'border-indigo-500 bg-indigo-50/40' : 'bg-white border-slate-100'}`;
                    div.innerHTML = `<div class="flex items-center gap-4"><img src="${r.img}" class="w-12 h-4 bg-slate-100 rounded" onerror="this.style.opacity='0'"><span class="text-[11px] font-bold text-slate-700">${r.name}</span></div>
                    <div class="flex items-center bg-white rounded-xl border p-1 shadow-sm"><button onclick="updateRibbon('${r.id}', -1)" class="w-7 h-7 font-bold text-slate-400">-</button><span class="w-6 text-center text-xs font-black text-indigo-600">${count}</span><button onclick="updateRibbon('${r.id}', 1)" class="w-7 h-7 text-indigo-600 font-bold">+</button></div>`;
                    list.appendChild(div);
                });
            } else if (state.tab === 'medals') {
                MEDALS.forEach(m => {
                    const active = state.medals.has(m.id);
                    const div = document.createElement('div');
                    div.className = `p-4 rounded-3xl border cursor-pointer transition-all ${active ? 'border-indigo-500 bg-indigo-50/40' : 'bg-white border-slate-100'}`;
                    div.onclick = () => toggleItem('medals', m.id);
                    div.innerHTML = `<div class="flex items-center justify-between"><span class="text-xs font-bold text-slate-700">${m.name}</span><span class="text-indigo-600 font-black">${active ? '✓' : '+'}</span></div>`;
                    list.appendChild(div);
                });
            } else {
                ARCS.forEach(a => {
                    const active = state.arcs.has(a.id);
                    const div = document.createElement('div');
                    div.className = `p-4 rounded-3xl border cursor-pointer transition-all ${active ? 'border-indigo-500 bg-indigo-50/40' : 'bg-white border-slate-100'}`;
                    div.onclick = () => toggleItem('arcs', a.id);
                    div.innerHTML = `<div class="flex items-center justify-between"><div class="flex items-center gap-4"><img src="${a.img}" class="h-6 w-12 object-contain"> <span class="text-xs font-bold text-slate-700">${a.name}</span></div><span class="text-indigo-600 font-black">${active ? '✓' : '+'}</span></div>`;
                    list.appendChild(div);
                });
            }
        }

        function updatePreview() {
            const rPreview = document.getElementById('u-ribbons'); rPreview.innerHTML = '';
            const allR = [...OFFICIAL_RIBBONS, ...POMPANO_RIBBONS];
            const activeR = allR.filter(r => state.ribbons.has(r.id)).sort((a,b) => a.precedence - b.precedence);
            if (activeR.length > 0) {
                const rows = [];
                let temp = [...activeR];
                const topSize = temp.length % 3 || 3;
                rows.push(temp.splice(0, topSize));
                while(temp.length > 0) rows.push(temp.splice(0, 3));
                rows.reverse().forEach(rowItems => {
                    const rowDiv = document.createElement('div'); rowDiv.className = 'flex gap-[1px] justify-center';
                    rowItems.forEach(r => {
                        const div = document.createElement('div'); div.className = 'ribbon-mini'; div.style.backgroundImage = `url(${r.img})`;
                        const count = state.ribbons.get(r.id);
                        if(count > 1) {
                            const star = document.createElement('div'); star.className = 'mini-star'; 
                            star.innerText = count > 5 ? '★S' : '★'.repeat(count-1);
                            div.appendChild(star);
                        }
                        rowDiv.appendChild(div);
                    });
                    rPreview.appendChild(rowDiv);
                });
            }
            const mPreview = document.getElementById('u-medals'); mPreview.innerHTML = '';
            state.medals.forEach(id => {
                const medal = MEDALS.find(m => m.id === id);
                const div = document.createElement('div'); div.className = 'medal-mini';
                div.innerHTML = `<div class="medal-ribbon-part" style="background:${medal.color}"></div><div class="medal-coin-part"></div>`;
                mPreview.appendChild(div);
            });
            const aPreview = document.getElementById('u-arcs'); aPreview.innerHTML = '';
            state.arcs.forEach(id => {
                const arc = ARCS.find(a => a.id === id);
                const div = document.createElement('div'); div.className = 'arc-mini';
                div.style.backgroundImage = `url(${arc.img})`;
                aPreview.appendChild(div);
            });
        }
        function resetAll() { state.ribbons.clear(); state.medals.clear(); state.arcs.clear(); updatePreview(); renderSelections(); }
    </script>
</body>
</html>
