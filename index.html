<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyUniform | Pompano Beach</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; overflow-x: hidden; }

        /* This only triggers on screens smaller than 768px (Mobile/Tablets) */
/* 1. TABLET VIEW (768px and down) - Keep your current settings here */
@media (max-width: 768px) {
    .mannequin-container {
        width: 380px; 
        height: 520px;
    }
    .ribbon-rack-container {
        top: 175px; /* Adjust this if tablet still feels slightly off */
        left: 63%;
        transform: translateX(-50%) scale(0.9);
    }
}

/* 2. PHONE VIEW (480px and down) - Specifically for small screens */
@media (max-width: 480px) {
    .mannequin-container {
        width: 320px; 
        height: 440px;
    }
    .ribbon-rack-container {
        /* If they are too high, INCREASE this number */
        top: 155px; 
        left: 63.5%;
        transform: translateX(-50%) scale(0.8);
    }
    .ribbon-mini {
        width: 30px;
        height: 9px;
    }
}

        .mannequin-container { 
            position: relative; 
            width: 480px; 
            height: 620px; 
            display: flex; 
            justify-content: center; 
        }

        .mannequin-img {
            height: 100%;
            width: auto;
            object-fit: contain;
            z-index: 10;
        }

        /* Ribbon Rack Positioning for Male Class A */
        .ribbon-rack-container { 
            position: absolute; 
            top: 164px; /* Adjusted for Male Class A pocket alignment if this is updated new text will appear */
            left: 69.5%;  /* Center of the left-side pocket area */
            transform: translateX(-50%); 
            display: flex; 
            flex-direction: column-reverse; 
            gap: 1.5px; 
            align-items: center; 
            z-index: 20;
        }

        .ribbon-mini {
            width: 35px; 
            height: 10px;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            border: 0.4px solid rgba(0,0,0,0.9);
            position: relative;
            box-shadow: 0 0.5px 1px rgba(0,0,0,0.3);
        }

        .mini-star {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 7px;
            color: #ffd700;
            text-shadow: 0.5px 0.5px 1px black;
            width: 100%;
            text-align: center;
            pointer-events: none;
            letter-spacing: -1px;
        }

        @keyframes pop { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .ribbon-mini { animation: pop 0.15s ease-out; }
    </style>
</head>
<body>

    <div id="landing-page" class="fixed inset-0 z-50 bg-[#0f172a] flex flex-col items-center justify-center p-6 text-white">
        <h1 class="text-5xl font-black text-center mb-12">Broward County<br><span class="text-indigo-500 italic">MyUniform</span></h1>
        <div onclick="enterApp()" class="p-8 bg-white/5 rounded-[2.5rem] border border-indigo-500/30 hover:bg-white/10 cursor-pointer transition-all w-full max-w-sm text-center">
            <h3 class="font-bold text-2xl">Pompano Beach</h3>
            <p class="text-indigo-400 text-[11px] font-black uppercase tracking-widest mt-2">Tornado Battalion</p>
        </div>
    </div>

    <div id="builder-content" class="hidden min-h-screen">
        <header class="p-6 flex items-center justify-between sticky top-0 bg-slate-50/80 backdrop-blur-xl z-40 border-b">
            <button onclick="exitApp()" class="bg-white px-4 py-2 rounded-xl border border-slate-200 font-bold text-xs uppercase">Exit</button>
            <div class="text-center">
                <h2 class="text-xl font-black">Pompano Beach HS</h2>
                <p class="text-indigo-600 font-black text-[10px] uppercase tracking-widest">Tornado Battalion</p>
            </div>
            <button onclick="resetAll()" class="text-red-500 font-bold text-xs uppercase tracking-wider">Reset</button>
        </header>

        <div class="max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-2 gap-10">
            <div class="flex flex-col items-center">
                <div class="bg-slate-900 w-full rounded-[4rem] p-4 shadow-2xl flex items-center justify-center overflow-hidden border-4 border-slate-800">
                    <div class="mannequin-container">
                        <img src="assets/Male_Class_A.png" class="mannequin-img" alt="Male Class A Uniform">
                        <div id="u-ribbons" class="ribbon-rack-container"></div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-[3rem] p-8 shadow-xl border h-[720px] flex flex-col">
                <div class="flex p-1.5 bg-slate-100 rounded-[1.8rem] mb-6">
                    <button class="flex-1 py-3 rounded-[1.5rem] font-bold text-sm bg-white text-indigo-600 shadow-sm">Ribbons</button>
                    <button class="flex-1 py-3 rounded-[1.5rem] font-bold text-sm text-slate-300 cursor-not-allowed">Medals</button>
                    <button class="flex-1 py-3 rounded-[1.5rem] font-bold text-sm text-slate-300 cursor-not-allowed">Arcs</button>
                </div>
                
                <input type="text" id="ribbonSearch" onkeyup="renderSelections()" placeholder="Search ribbons..." class="w-full p-4 mb-4 rounded-2xl border border-slate-200 bg-slate-50 text-sm outline-none focus:ring-2 focus:ring-indigo-500 transition-all">
                
                <div id="selection-list" class="space-y-3 overflow-y-auto pr-2 flex-1"></div>
            </div>
        </div>
    </div>

    <script>
        // Official Ribbons Array (Precedence Ordered)
        const OFFICIAL_RIBBONS = [
            { id: 'hero', name: 'Medal for Heroism', precedence: 1, img: 'assets/army_jrotc_medal_for_heroism_ribbon.png' },
            { id: 'sup-c', name: 'Superior Cadet Award', precedence: 2, img: 'assets/army_jrotc_superior_cadet_ribbon.png' },
            { id: 'n11', name: 'Distinguished Cadet Award N-1-1', precedence: 3, img: 'assets/army_jrotc_distinguished_cadet_ribbon.png' },
            { id: 'n12', name: 'Academic Excellence Award N-1-2', precedence: 4, img: 'assets/army_jrotc_academic_excellence_ribbon.png' },
            { id: 'n13', name: 'Academic Achievement Award N-1-3', precedence: 5, img: 'assets/army_jrotc_academic_achievement_ribbon.png' },
            { id: 'n14', name: 'Perfect Attendance Award N-1-4', precedence: 6, img: 'assets/army_jrotc_perfect_attendance_ribbon.png' },
            { id: 'n15', name: 'Student Governement Award N-1-5', precedence: 7, img: 'assets/army_jrotc_student_government_ribbon.png' },
            { id: 'n16', name: 'Leadership Education & Training N-1-6', precedence: 8, img: 'assets/army_jrotc_leadership_education_training_service_ribbon.png' },
            { id: 'n17', name: 'Superior Instructor N-1-7 Ribbon', precedence: 9, img: 'assets/army_jrotc_n_1_7_ribbon.png' },
            { id: 'n18', name: 'CPR First Aid N-1-8 Ribbon', precedence: 10, img: 'assets/army_jrotc_n_1_8_ribbon.png' },
            { id: 'n19', name: 'Distinguished Cadet N-1-9 Ribbon', precedence: 11, img: 'assets/army_jrotc_n_1_9_ribbon.png' },
            { id: 'n110', name: 'Honor Cadet N-1-10 Ribbon', precedence: 12, img: 'assets/army_jrotc_n_1_10_ribbon.png' },
            { id: 'n31', name: 'Dai/Sai Instructor Leadership N-3-1 Ribbon', precedence: 13, img: 'assets/army_jrotc_dai_sai_instructor_leadership_ribbon.png' },
            { id: 'n32', name: 'Personal Appearance N-3-2 Ribbon', precedence: 14, img: 'assets/army_jrotc_personal_appearance_ribbon.png' },
            { id: 'n33', name: 'Profiency N-3-3 Ribbon', precedence: 15, img: 'assets/army_jrotc_proficiency_ribbon.png' },
            { id: 'n34', name: 'Drill Team N-3-4 Ribbon', precedence: 16, img: 'assets/army_jrotc_drill_team_ribbon.png' },
            { id: 'n35', name: 'Orienteering N-3-5 Ribbon', precedence: 17, img: 'assets/army_jrotc_orienteering_ribbon.png' },
            { id: 'n36', name: 'Color | Honor Guard N-3-6 Ribbon', precedence: 18, img: 'assets/army_jrotc_color_guard_ribbon.png' },
            { id: 'n37', name: 'Rifle | Marksmanship Team N-3-7 Ribbon', precedence: 19, img: 'assets/army_jrotc_rifle_team_ribbon.png' },
            { id: 'n38', name: 'Adventure Training Team N-3-8 Ribbon', precedence: 20, img: 'assets/army_jrotc_adventure_training_ribbon.png' },
            { id: 'n39', name: 'Commendation N-3-9 Ribbon', precedence: 21, img: 'assets/army_jrotc_commendation_ribbon.png' },
            { id: 'n310', name: 'Good Conduct N-3-10 Ribbon', precedence: 22, img: 'assets/army_jrotc_good_conduct_ribbon.png' },
            { id: 'n311', name: 'JCLC Participation N-3-11 Ribbon', precedence: 23, img: 'assets/army_jrotc_jclc_participation_ribbon.png' },
            { id: 'n312', name: 'Championship Drill Team N-3-12 Ribbon', precedence: 24, img: 'assets/army_jrotc_n_3_12_ribbon.png' },
            { id: 'n313', name: 'Raider Team N-3-13 Ribbon', precedence: 25, img: 'assets/army_jrotc_n_3_13_ribbon.png' },
            { id: 'n314', name: 'Recondo / Rappelling N-3-14 Ribbon', precedence: 26, img: 'assets/army_jrotc_n_3_14_ribbon.png' },
            { id: 'n315', name: 'Meritorious Actions N-3-15 Ribbon', precedence: 27, img: 'assets/army_jrotc_n_3_15_ribbon.png' },
            { id: 'n21', name: 'Varsity Athletics Ribbon N-2-1', precedence: 28, img: 'assets/army_jrotc_varsity_athletics_ribbon.png' },
            { id: 'n22', name: 'Physical Fitness N-2-2 Ribbon', precedence: 29, img: 'assets/army_jrotc_physical_fitness_ribbon.png' },
            { id: 'n23', name: 'JROTC Athletics N-2-3 Ribbon', precedence: 30, img: 'assets/army_jrotc_athletics_ribbon.png' },
            { id: 'n24', name: 'Junior Varsity Athletics N-2-4 Ribbon', precedence: 31, img: 'assets/army_jrotc_n_2_4_ribbon.png' },
            { id: 'n25', name: 'Athletic Service N-2-5 Ribbon', precedence: 32, img: 'assets/army_jrotc_n_2_5_ribbon.png' },
            { id: 'n41', name: 'Parade N-4-1 Ribbon', precedence: 33, img: 'assets/army_jrotc_parade_ribbon.png' },
            { id: 'n42', name: 'Recruiting N-4-2 Ribbon', precedence: 34, img: 'assets/army_jrotc_recruiting_ribbon.png' },
            { id: 'n43', name: 'School Support N-4-3 Ribbon', precedence: 35, img: 'assets/army_jrotc_n_4_3_ribbon.png' },
            { id: 'n44', name: 'Community Service N-4-4 Ribbon', precedence: 36, img: 'assets/army_jrotc_n_4_4_ribbon.png' },
            { id: 'n45', name: 'Confidence Course N-4-5 Ribbon', precedence: 37, img: 'assets/army_jrotc_n_4_5_ribbon.png' },
            { id: 'n46', name: 'Service Learning N-4-6 Ribbon', precedence: 38, img: 'assets/army_jrotc_service_learning_ribbon.png' },
            { id: 'n47', name: 'Excellent Staff Performance N-4-7 Ribbon', precedence: 39, img: 'assets/army_jrotc_excellent_staff_performance_ribbon.png' }
        ];

        const POMPANO_RIBBONS = [
            { id: 'p1', name: 'Military Appreciation Ribbon', precedence: 200, img: 'assets/Military_Appreciation_Ribbon.png' },
            { id: 'p2', name: 'Q1 Cadet of the Quarter', precedence: 201, img: 'assets/Q1_Cadet_of_Quarter_Ribbion.png' },
            { id: 'p3', name: 'Q1 Company of the Quarter', precedence: 202, img: 'assets/Q1_Company_Of_Quarter_Ribbon.png' },
            { id: 'p4', name: 'Q2 Cadet of the Quarter', precedence: 203, img: 'assets/Q2_Cadet_Of_Quarter_Ribbon.png' },
            { id: 'p5', name: 'Q3 Cadet of the Quarter', precedence: 204, img: 'assets/Q3_Cadet_Of_Quarter_Ribbion.png' },
            { id: 'p6', name: 'Q4 Cadet of the Quarter', precedence: 205, img: 'assets/Q4_Cadet_Of_Quarter_Ribbion.png' },
            { id: 'p7', name: 'Q4 Company of the Quarter', precedence: 206, img: 'assets/Q4_Company_Of_Quarter.png' },
            { id: 'p8', name: 'Funeral Ribbon', precedence: 207, img: 'assets/Funeral_Ribbon.png' },
            { id: 'p9', name: 'Honor Company Ribbon', precedence: 208, img: 'assets/Honor_Company_Ribbon.png' },
            { id: 'p10', name: 'EC Attendance Ribbon', precedence: 209, img: 'assets/EC_Attendence_Ribbon.png' },
            { id: 'p11', name: 'EC Honor Cadet Ribbon', precedence: 210, img: 'assets/EC_Honor_Cadet_ribbion.png' },
            { id: 'p12', name: 'EC Honor Company Ribbon', precedence: 211, img: 'assets/EC_Honor_Company_Ribbon.png' },
            { id: 'p13', name: 'Company Req Completion Ribbon', precedence: 212, img: 'assets/Company_Req_Completion_Ribbon.png' }
        ];

        let state = { ribbons: new Map() };

        function enterApp() {
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('builder-content').classList.remove('hidden');
            renderSelections();
        }

        function exitApp() { location.reload(); }

        function updateRibbon(id, d) {
            let count = (state.ribbons.get(id) || 0) + d;
            if (count <= 0) state.ribbons.delete(id); 
            else state.ribbons.set(id, Math.min(count, 5));
            updatePreview(); renderSelections();
        }

        function renderSelections() {
            const list = document.getElementById('selection-list');
            const search = document.getElementById('ribbonSearch').value.toLowerCase();
            list.innerHTML = '';
            
            const available = [...OFFICIAL_RIBBONS, ...POMPANO_RIBBONS];

            available.filter(r => r.name.toLowerCase().includes(search)).forEach(r => {
                const count = state.ribbons.get(r.id) || 0;
                const div = document.createElement('div');
                div.className = `flex items-center justify-between p-4 rounded-2xl border transition-all ${count > 0 ? 'border-indigo-500 bg-indigo-50' : 'bg-white border-slate-100'}`;
                div.innerHTML = `
                    <div class="flex items-center gap-3">
                         <div class="w-14 h-4 bg-slate-100 rounded overflow-hidden flex items-center justify-center border border-slate-200">
                            <img src="${r.img}" class="w-full h-full object-fill" onerror="this.style.opacity='0'">
                        </div>
                        <span class="text-[11px] font-bold text-slate-700">${r.name}</span>
                    </div>
                    <div class="flex items-center bg-white rounded-xl border p-1 shadow-sm">
                        <button onclick="updateRibbon('${r.id}', -1)" class="w-7 h-7 font-bold text-slate-400">-</button>
                        <span class="w-6 text-center text-xs font-black text-indigo-600">${count}</span>
                        <button onclick="updateRibbon('${r.id}', 1)" class="w-7 h-7 text-indigo-600 font-bold">+</button>
                    </div>`;
                list.appendChild(div);
            });
        }

        function updatePreview() {
            const container = document.getElementById('u-ribbons');
            container.innerHTML = '';
            
            const active = [...OFFICIAL_RIBBONS, ...POMPANO_RIBBONS]
                .filter(r => state.ribbons.has(r.id))
                .sort((a,b) => a.precedence - b.precedence);

            if(active.length === 0) return;

            let temp = [...active];
            const rows = [];
            const topRowSize = temp.length % 3 || 3;
            rows.push(temp.splice(0, topRowSize));
            while(temp.length > 0) rows.push(temp.splice(0,3));

            rows.reverse().forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = "flex gap-[1.5px]";
                row.forEach(r => {
                    const d = document.createElement('div');
                    d.className = 'ribbon-mini';
                    d.style.backgroundImage = `url(${r.img})`;
                    const c = state.ribbons.get(r.id);
                    if(c > 1) {
                        const s = document.createElement('div');
                        s.className = 'mini-star';
                        s.innerText = 'â˜…'.repeat(c-1);
                        d.appendChild(s);
                    }
                    rowDiv.appendChild(d);
                });
                container.appendChild(rowDiv);
            });
        }

        function resetAll() {
            state.ribbons.clear();
            if(document.getElementById('ribbonSearch')) document.getElementById('ribbonSearch').value = '';
            updatePreview();
            renderSelections();
        }
    </script>
</body>
</html>
